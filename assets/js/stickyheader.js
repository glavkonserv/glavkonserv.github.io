!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.lrStickyHeader=e(t)}):"object"==typeof exports?module.exports=e(t):t.lrStickyHeader=e(t)}(window,function(a){"use strict";function r(t,e){for(var i=t[e],n=t;null!==(n=n.offsetParent);)i+=n[e];return i}var l={setWidth:function(){var t,e,i=this.tbody.getElementsByTagName("TR")[0],n=this.thead.getElementsByTagName("TR")[0];function s(t){t.style.width=t.offsetWidth+"px"}i&&n&&(t=i.getElementsByTagName("TD"),e=n.getElementsByTagName("TH"),[].forEach.call(t,s),[].forEach.call(e,s))},eventListener:function(){var t=r(this.thead,"offsetTop")-Number(this.headerHeight),e=r(this.thead,"offsetLeft"),i=this.parentIsWindow?0:r(this.parent,"offsetTop"),n=this.parentIsWindow?parent.scrollY:this.parent.scrollTop,s=this.thead.className.split(" ");!0!==this.stick&&t-(i+n)<0&&0<t+this.tbody.offsetHeight-(i+n)&&(this.stick=!0,this.treshold=t,this.windowScrollY=this.parentIsWindow?0:a.scrollY,this.setWidth(),this.thead.style.left=e+"px",this.thead.style.top=Number(this.headerHeight+i-this.windowScrollY)+"px",setTimeout(function(){s.push("lr-sticky-header"),this.thead.style.position="fixed",this.thead.className=s.join(" "),this.element.style.marginTop=Number(this.thead.offsetHeight)+"px"}.bind(this),0)),!0!==this.stick||this.parentIsWindow||this.windowScrollY===a.scrollY||(this.windowScrollY=a.scrollY,this.thead.style.top=Number(this.headerHeight+i-this.windowScrollY)+"px"),!0===this.stick&&(this.parentIsWindow&&0<this.treshold-n||n<=0)&&(this.stick=!1,this.thead.style.position="initial",s.splice(s.indexOf("lr-sticky-header"),1),this.thead.className=s.join(" "),this.element.style.marginTop="0")}};return function(t,e){var i=0;e&&e.headerHeight&&(i=e.headerHeight);var n,s,r=a;if(e&&e.parent&&(r=e.parent),"TABLE"!==t.tagName)throw new Error("lrStickyHeader only works on table element");if(s=t.getElementsByTagName("TBODY"),!(n=t.getElementsByTagName("THEAD")).length)throw new Error("could not find the thead group element");if(!s.length)throw new Error("could not find the tbody group element");n=n[0],s=s[0];var o=Object.create(l,{element:{value:t},parent:{get:function(){return r}},parentIsWindow:{value:r===a},headerHeight:{get:function(){return i}},thead:{get:function(){return n}},tbody:{get:function(){return s}}}),h=o.eventListener.bind(o);return r.addEventListener("scroll",h),r!==a&&a.addEventListener("scroll",h),o.clean=function(){r.removeEventListener("scroll",h),r!==a&&a.removeEventListener("scroll",h)},o}});